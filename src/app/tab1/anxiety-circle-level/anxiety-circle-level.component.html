<ion-card class="stats-card animate-fade-in" *ngIf="dataAvailable">
  <ion-card-header>
    <ion-card-title>
      <span class="ion-card-title">
        <ion-icon name="pulse-outline" class="icon-phone"></ion-icon>
        Mi Estado Emocional
      </span>
    </ion-card-title>
  </ion-card-header>

  <ion-card-content>
    <div class="stat-box">

      <div class="emocion_container">
        <!-- Columna izquierda -->
        <div class="emocion_columna">
          <!-- Energ√≠a -->
          <div class="emocion_item">
            <h4>Energ√≠a</h4>
            <svg width="80" height="80" viewBox="0 0 90 90">
              <circle cx="45" cy="45" r="36" stroke="#f2f2f2" stroke-width="8" fill="none" />
              <circle cx="45" cy="45" r="36" stroke="#f1c40f" stroke-width="8" fill="none" stroke-dasharray="226.19"
                [attr.stroke-dashoffset]="226.19 - ((energyLevel ?? 0) / 10) * 226.19" transform="rotate(-90 45 45)"
                stroke-linecap="round" />
              <text x="45" y="50" text-anchor="middle" font-size="16" fill="#f1c40f">‚ö°{{ energyLevel }}</text>
            </svg>
          </div>

          <!-- Desgana -->
          <div class="emocion_item">
            <h4>Fatiga</h4>
            <svg width="80" height="80" viewBox="0 0 90 90">
              <circle cx="45" cy="45" r="36" stroke="#f2f2f2" stroke-width="8" fill="none" />
              <circle cx="45" cy="45" r="36" stroke="#95a5a6" stroke-width="8" fill="none" stroke-dasharray="226.19"
                [attr.stroke-dashoffset]="226.19 - ((desganaLevel ?? 0) / 10) * 226.19" transform="rotate(-90 45 45)"
                stroke-linecap="round" />
              <text x="45" y="50" text-anchor="middle" font-size="16" fill="#95a5a6">
                <ng-container *ngIf="desganaLevel !== null">
                  {{ desganaLevel <= 3 ? 'üòä' : desganaLevel <=6 ? 'üòê' : 'üò©' }} {{ desganaLevel }} </ng-container>
              </text>
            </svg>
          </div>
        </div>

        <!-- C√≠rculo central (Ansiedad) -->
        <div class="emocion_central">
          <h4>Nivel de ansiedad previsto</h4>
          <svg width="140" height="140" viewBox="0 0 140 140">
            <circle cx="70" cy="70" r="60" stroke="#e6f0fa" stroke-width="12" fill="none" />
            <circle cx="70" cy="70" r="60" stroke="#3498db" stroke-width="12" fill="none" stroke-dasharray="376.99"
              [attr.stroke-dashoffset]="376.99 - ((anxietyPrediction ?? 0) / 10) * 376.99" transform="rotate(-90 70 70)"
              stroke-linecap="round" />
            <text x="70" y="75" text-anchor="middle" font-size="18" fill="#3498db">
              <ng-container *ngIf="anxietyPrediction !== null">
                {{ anxietyPrediction <= 3 ? 'üòä' : anxietyPrediction <=7 ? 'üòê' : 'üò°' }} {{ anxietyPrediction }}
                  </ng-container>
            </text>
          </svg>
        </div>

        <!-- Columna derecha -->
        <div class="emocion_columna">
          <!-- Alegr√≠a -->
          <div class="emocion_item">
            <h4>Alegr√≠a</h4>
            <svg width="80" height="80" viewBox="0 0 90 90">
              <circle cx="45" cy="45" r="36" stroke="#f2f2f2" stroke-width="8" fill="none" />
              <circle cx="45" cy="45" r="36" stroke="#2ecc71" stroke-width="8" fill="none" stroke-dasharray="226.19"
                [attr.stroke-dashoffset]="226.19 - ((alegriaLevel ?? 0) / 10) * 226.19" transform="rotate(-90 45 45)"
                stroke-linecap="round" />
              <text x="45" y="50" text-anchor="middle" font-size="16" fill="#2ecc71">
                <ng-container *ngIf="alegriaLevel !== null">
                  {{ alegriaLevel <= 3 ? 'üòä' : alegriaLevel <=6 ? 'üòê' : 'üò°' }} {{ alegriaLevel }} </ng-container>
              </text>
            </svg>
          </div>

          <!-- Tristeza -->
          <div class="emocion_item">
            <h4>Tristeza</h4>
            <svg width="80" height="80" viewBox="0 0 90 90">
              <circle cx="45" cy="45" r="36" stroke="#f2f2f2" stroke-width="8" fill="none" />
              <circle cx="45" cy="45" r="36" stroke="#9b59b6" stroke-width="8" fill="none" stroke-dasharray="226.19"
                [attr.stroke-dashoffset]="226.19 - ((tristezaLevel ?? 0) / 10) * 226.19" transform="rotate(-90 45 45)"
                stroke-linecap="round" />
              <text x="45" y="50" text-anchor="middle" font-size="16" fill="#9b59b6">
                <ng-container *ngIf="tristezaLevel !== null">
                  {{ tristezaLevel <= 3 ? 'üòä' : tristezaLevel <=6 ? 'üòê' : 'üò°' }} {{ tristezaLevel }} </ng-container>
              </text>
            </svg>
          </div>
        </div>
      </div>
    </div>
  </ion-card-content>
</ion-card>